# 팀 · 프로젝트 · 업무 구조 정리

## 1. 현재 라우트 구조

| 경로 | 설명 | 접근 |
|------|------|------|
| `/dashboard` | 전사 대시보드 (요약, 팀별 카드, 지연 업무, 활동) | 승인 사용자 전체 |
| `/teams` | 팀 목록 (CEO만 목록, 팀원은 내 팀으로 리다이렉트) | 로그인 사용자 |
| `/teams/[teamId]` | 팀 상세: 프로젝트 카드, 팀 일정, 팀 칸반 | 해당 팀 소속 또는 CEO |
| `/teams/[teamId]/projects/[projectId]` | 프로젝트 상세: 프로젝트 칸반만 | 해당 팀 소속 또는 CEO |
| `/me` | 내 페이지 (개인 칸반, 출퇴근, 연차) | 로그인 사용자 |
| `/tasks` | 업무 목록 (필터) | 로그인 사용자 |
| `/activity` | 활동 로그 (팀/사용자/타입 필터) | 로그인 사용자 |
| `/members` | 직원 관리 | CEO, TEAM_LEADER(본인 팀만) |
| `/calendar` | 캘린더 | 로그인 사용자 |

## 2. 팀 → 프로젝트 → 업무 흐름

```
사이드바 "팀" 클릭
  → /teams (CEO: 팀 목록 / 팀원: /teams/[내 팀 ID] 리다이렉트)
  → /teams/[teamId] 팀 상세
       - ProjectCards: 프로젝트 카드 클릭 시 /teams/[teamId]/projects/[projectId]
       - TeamScheduleCard: 팀 일정·업무 미리보기
       - TeamKanban: 팀 전체 업무 칸반 (프로젝트 필터 가능), 새 업무 추가
  → /teams/[teamId]/projects/[projectId] 프로젝트 상세
       - ProjectKanban: 해당 프로젝트 업무만 칸반, 새 업무 추가
```

- **업무 생성**: 팀 상세(TeamKanban) 또는 프로젝트 상세(ProjectKanban)에서 "새 업무 추가" → CreateTaskModal (담당자 선택 가능: CEO/팀장).
- **업무 수정/담당자 변경**: 카드 클릭 → TaskDetailModal (상태·담당자 변경, 댓글, 삭제).

## 3. 데이터 계층

- **Team** 1:N **Project** (teamId)
- **Project** 1:N **Task** (projectId, optional)
- **Task**는 반드시 **Team** 소속 (teamId), 선택적으로 **Project** 소속 (projectId)
- **Task.assigneeId**: 담당자 (같은 팀 사용자만 지정 가능)

## 4. 네비게이션 요약

- **대시보드**: 전사 요약, 팀별 카드(클릭 시 해당 팀 업무 리스트), 활동 피드
- **팀**: 위 2번 흐름
- **내 페이지**: 개인 업무 칸반, 출퇴근, 연차
- **활동 로그**: 업무/연차/출퇴근 변경 이력, 팀·사용자·타입 필터

## 5. 개선 제안 (선택)

- **브레드크럼**: 팀 상세·프로젝트 상세 상단에 "팀 > 팀명" 또는 "팀 > 팀명 > 프로젝트명" 표시 시 이동 경로 인지에 도움.
- **업무 목록 페이지 (`/tasks`)**: 현재 필터만 있는 경우, "팀/프로젝트 선택 후 리스트"처럼 팀·프로젝트를 먼저 고르면 해당 팀/프로젝트 업무만 보이게 하면 "팀 → 업무" 흐름과 맞출 수 있음.
- **사이드바**: "팀" 아래에 "내 팀"이 있으면 팀원이 한 번에 `/teams/[내 팀 ID]`로 갈 수 있어서, 지금처럼 `/teams`에서 리다이렉트하는 것과 동일한 목적을 더 직관적으로 제공 가능.

위 구조와 흐름을 유지한 채로, 담당자 지정 UI는 다음처럼 반영되어 있습니다.

- **CreateTaskModal**: CEO/팀장일 때만 "담당자" 선택 표시, 같은 팀 사용자만 선택, 미선택 시 생성자 본인.
- **TaskDetailModal**: CEO/팀장일 때만 "담당자" 변경 셀렉트 표시, 같은 팀 사용자로 변경 후 저장 시 API에서 검증.
